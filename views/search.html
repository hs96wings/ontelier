{% extends 'main_layout.html' %}
{% block content %}

<script src="/javascripts/getParameter.js"></script>


<link rel="stylesheet" href="/stylesheets/allview.css"/>


<div class="container">
    <div class="class-container">

<div class="class-wrapper">
    <p class="pt10" id="list-text">search result</p>
    <span class="pt27" id="list-title"> 검색 결과</span>

        <div class="class-list">

{% for class in classes %}

{% set sale_price = class.class_price * ( (100 - class.class_discount) / 100 ) %}

<div class="class-item" id="class-id{{class.id}}">
  <ul><a href="/class/{{class.id}}">
      <li><div class="class-image"><img class="class-thumbnail" src="{{class.class_img}}"></div></li>
      <li class="class-title">{{class.class_title}}</li>
      <li class="class-price">
          {% if class.class_discount %}
          <span class="discount">{{class.class_discount}}%</span>
          <span class="price">{{class.class_price.toLocaleString('ko-KR')}}원</span>
          {% endif %}
          <span class="sale_price">{{sale_price.toLocaleString('ko-KR')}}원</span><br>
      </li>
      <li class="class-score">

          <div class="review-star-wrapper">
            <div class="class-star-wrapper">
              <span class="star">★★★★★</span><span class="star-fill">★★★★★</span>
            </div>
          </div>
          <span class="pt10 gray count">({{class.reviewCount}})<!--후기개수--></span>
      </li></a>
  </ul>
</div>

<script type="text/javascript">
$("#class-id{{class.id}} .star-fill").css("width", "{{class.class_score * 20 + 5}}%");
</script>
{% endfor %}

          <!-- 클래스 리스트 열 맞추기 -->
          {% if classes.length % 4 != 0 %}
          <script>
            for (var i = 0; i < 4 - ({{classes.length}} % 4) ; i++) {

            document.write(`<div class="class-item"></div>`);

          }
          </script>
          {% endif %}

        </div>
      </div>
    </div>
</div>

<script type="text/javascript">
  var keyword = getParameter("title");
  $("#list-title").prepend(`"${keyword}"`);
</script>
{% endblock %}
