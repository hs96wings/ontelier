{% extends 'main_layout.html' %}
{% block content %}

<div class="contents_video_container">

<!----- 강의영상 배너 ----->
<div class="contents-video-wrapper">
  <iframe src="https://www.youtube.com/embed/aQch9Vb7Bdw{{video.video_url}}?modestbranding=1&rel=0" title="video player" frameborder="0" allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
  <!-- <button type="button" cla><img src="/images/play-btn-2.png"></button> -->
</div>

<!----- 좌측 컨텐츠 ----->
<div class="class_center">

  <menu class="class_nav floating">
    <ul>
      <li class="on" onclick="acyncMovePage('/class/contents/{{class.id}}/classnote?num=0-1')">수업노트</li>
      <li onclick="acyncMovePage('/class/contents/{{class.id}}/cirriculum?num=0-1')">커리큘럼</li>
    </ul>
  </menu>

  <div class="class_contents">
    <!-- 네비바 클릭시 에이젝스로 변경되는 콘텐츠 영역 -->
  </div>

</div>
    <!-- <input type="button" value="돌아가기" onclick="history.back()"> -->

</div>

<script>

      var classnote = `<!-- 클래스 설명 -->
        <p id="class_info" class="note-title">{{class.class_title}}</p>

          <!-- 챕터 소개 -->
            <p id="chapter-depth0">prologue</p>
            <p id="chapter-depth1">0 -1. 안녕하세요. 친구같은 수박동입니다.</p>

          <!-- 수업 목표 -->
          <p class="semi-title">[수업목표]</p>
          <p>{{info.lecture_goal}}프랑스 자수와 펀치니들 자수 수업에 오신걸 환영해요 !
          이번 클래스에서는 다양한 종류의 실과 기법, 그리고 많이 사용하는 입체 자수 기법을 골라 알려드립니다. 프랑스자수의 기본적인 재료들에 대해 꼼꼼히 살펴보고 총 다섯개의 작품을 만들어볼 거에요.</p>

          <!-- 수업 개요 -->
          <p class="semi-title">[수업개요]</p>
          <p>{{info.lecture_summary}}수박동은 자수, 펀치니들 등 하고 싶은 일들을 하나씩 디자인 해나가고 있어요.
  프랑스 자수는 제가 가진 첫 취미예요. 보기만 해도 기분 좋아지는 다양한 컬러의 실을 사용하고 제가 좋아하는 귀여운 것들을 디자인하면서 힘든 일이나 지친 일들을 잠시나마 잊게 해주는 그게 자수의 큰 매력같아요. 자수를 시작하면서 느낀 좋은 경험들을 함께 나누고 싶어요. 이젠 함께 놀 수 있기를 바라요.</p>

          <!-- 다음 영상 예고 -->
          <p class="semi-title">[다음 영상 예고]</p>
          <p>{{info.lecture_previous}}</p>

        <div class="class_space"></div>`;


      var cirriculum = `
      <p class="sub-title">커리큘럼</p>

          <div id="menu">
          <!-- 커리큘럼 -->
            <div>
        {% if cirriculum %}
          {% for cir in cirriculum %}
            {% if cir.depth == 0 %}
             </div>
              <div class="cirriculum-title">
                <span>{{cir.cirriculum_text.replace(' ', '. ')}}</span>
                <img src="/images/arrow-down.png">
              </div>
              <div class="submenu">
            {% elif cir.depth == 1 %}
              {% if cir.cirriculum_text.includes("-") %}
              <span>{{cir.cirriculum_text.split("-")[1].replace(' ', '. ')}}<a href="#" class="cirriculum-btn"><img src="/images/play-btn-gray.png" id="{{cir.cirriculum_text.split(" ")[0]}}"></a></span>
              {% else %}
              <span>{{cir.cirriculum_text}}</span>
              {% endif %}
            {% endif %}


          {% endfor %}
        {% endif %}

           </div>

          </div>

          <div class="class_space"></div>`;

    // 콘텐츠 로드
    $(".class_contents").html(classnote);


    function acyncMovePage(url){
        $(".class_contents").load(url);
    }

$(function() {
    var tabBtn = $(".class_nav li");     //각각의 버튼을 변수에 저장


    tabBtn.click(function(){
      var target = $(this);         //버튼의 타겟(순서)을 변수에 저장
      var index = target.index();   //버튼의 순서를 변수에 저장
      tabBtn.removeClass("on");    //버튼의 클래스를 삭제
      target.addClass("on");       //타겟의 클래스를 추가
    });
  });

  $(".cirriculum-title").click(function() {
    $(this).next(".submenu").stop().slideToggle(300);
    $(this).next(".submenu").siblings(".submenu").slideUp(300); // 1개씩 펼치기

    if ( $(this).find("img").attr("class") == "up" ) {
      $(this).find("img").attr("src", "/images/arrow-down.png"); // down 화살표로
    } else { // down 눌렀을 때
      $(".cirriculum-title img").replaceWith('<img src="/images/arrow-down.png">'); // 다른 화살표들 down으로
      $(this).find("img").attr("src", "/images/arrow-up.png"); // up 화살표로
    }

    $(this).find("img").toggleClass("up");
  });

  $(function() {

    var cirBtn = $(".cirriculum-btn img");

    cirBtn.click(function() {

      cirBtn.attr("src", "/images/play-btn-gray.png");
      $(this).attr("src", "/images/play-btn-green.png");

      $("#contents-btn-num").html($(this).attr("id"));

    });
  });
</script>


{% endblock %}
